{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mis Direcciones | VGLuxeBeauty</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/notifications.css' %}">
    <link rel="stylesheet" href="{% static 'css/ui-utils.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f5f5f5;
        }
        .direcciones-container {
            max-width: 1100px;
            margin: 40px auto;
            padding: 0 20px 40px 20px;
        }
        .direccion-card {
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }
        .direccion-actions a {
            margin-right: 10px;
        }
        .badge-default {
            background: #10b981;
            color: white;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    {% include 'partials/header.html' %}

    <main>
        <div class="direcciones-container">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1><i class="bi bi-geo-alt-fill"></i> Mis Direcciones</h1>
                <a href="{% url 'agregar_direccion' %}" class="btn btn-primary">
                    <i class="bi bi-plus-lg"></i> Agregar Dirección
                </a>
            </div>

            {% if direcciones %}
                {% for direccion in direcciones %}
                <div class="direccion-card">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <h5 class="mb-1">{{ direccion.nombre_completo }}</h5>
                            <p class="mb-1">{{ direccion.direccion }}{% if direccion.referencia %}, {{ direccion.referencia }}{% endif %}</p>
                            <p class="mb-1">{{ direccion.comuna }}, {{ direccion.region }}</p>
                            <p class="mb-1">{{ direccion.telefono }}</p>
                            {% if direccion.codigo_postal %}
                            <p class="mb-1">CP: {{ direccion.codigo_postal }}</p>
                            {% endif %}
                        </div>
                        <div>
                            {% if direccion.predeterminada %}
                            <span class="badge-default">Predeterminada</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="direccion-actions mt-3">
                        <a href="{% url 'editar_direccion' direccion.id %}" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-pencil"></i> Editar
                        </a>
                        <a href="{% url 'eliminar_direccion' direccion.id %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('¿Eliminar esta dirección?');">
                            <i class="bi bi-trash"></i> Eliminar
                        </a>
                    </div>
                </div>
                {% endfor %}
            {% else %}
                <div class="text-center p-5 bg-white rounded">
                    <i class="bi bi-geo" style="font-size: 4rem; color: #ccc;"></i>
                    <h3 class="mt-3">No tienes direcciones guardadas</h3>
                    <p>Agrega una dirección para facilitar tus compras.</p>
                    <a href="{% url 'agregar_direccion' %}" class="btn btn-primary">Agregar Dirección</a>
                </div>
            {% endif %}
        </div>
    </main>

    {% include 'partials/footer.html' %}
</body>
</html>
